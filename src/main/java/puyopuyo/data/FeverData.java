package puyopuyo.data;

import java.util.Random;

import puyopuyo.play.BlockPuyo;
import puyopuyo.play.PuyoData;

public class FeverData {
	// 3色
	private static String[] zabuton3 = {
		"23132,231,231,12,11,0",
		"13232312,1323,1323,21,22,0",
		"3212321232,32123,32123,13,11,0",	// 5
		"131231321312,131231,131231,21,22,0",
		"212312132112,212312,232312,32,332,0",
		"323123213223,323123,313123,12,112,2211",
		"212312132112,212312,232312,321,3321,221133",
		"323123213223,323123,313123,1312,11312,33112211",	// 10
		"131231321331,131231,121231,21231,2212313,112233113",
		"212312132112,212312,23231232,3231233,3323121,22331122",
		"212312132112,21231232,23231213,32312313,3323121,223311221",
		"212312132112,21231232,2323123,3231231322,3323121121,2233112213",
		"212312121123,212312323,2323123,323123132,332312113231,223311223231"
	};
	private static String[] kaidan3 = {
		"0,0,1112,2223,3332,0,0",
		"0,1113,3332,2223,3332,0,0",
		"3,1113,3331,11123,22231,33",	// 5
		"0,33321,2223,33313,11132,22233",
		"33322232,22213,1112,2223,3331,111",
		"22211121,11132,3331,11121,22213,33311",
		"11133313,3332113,22231,333132,11132,22233",
		"3332232232,22213133,111211,222323,333213,11122",	// 10
		"1113313313,33321211,22232122,333131,111321,2223322",
		"2221121121,11132322,33313233,111212,2221323,3331133232",
		"3332232232,22213133,11121311,222323,333213122,11122112131",
		"3332232232,22213133,11121311,222323233,333213232,211121121131",
		"33322322312,222131331,111213112,2223232321,333213232332,11122112113"	// 15
	};
	private static String[] kagizumi3 = {
		"0,22,3233,113132,1,0",
		"0,33,23223,1121,3133,3,0",
		"0,11,3133,2232,1211,3313322,0",	// 5
		"22,1211,3133,2232,1211,3313322",
		"112221112,3133,2322,1121,3133,2232211",
		"11222121,313311,23223,11211,3133,22322",
		"22333232,12112122,313311,223223,1211,33133",
		"33111313,23223233,12112122,331311,23223,1121133",	// 10
		"33111313,23223233,12112212,33131311,232233,1121122",
		"11222121,31331311,23223323,11212122,3133113,223223313",
		"11222121,31331311,23223323,11212122,313311311,22322331313",
		"223332323,121121221,31331131,22323233,12112212112,331331121212",
		"223323321,121121223,3133113121,2232323321,121122123132,331331123312"
	};
	private static String[] hirazumi3 = {
		"0,0,33,131,212,2121122",
		"21,213,212,323,131,131",
		"2112221,321,323,131,212,21211",	// 5
		"133231,21322,2121,323,131,131",
		"3221123,132131,13133,2121,323,323",
		"3221313,1321312,131313,21211,3232,323",
		"13321233,21321211,212121,323121,131232,13133",
		"21132311,32132322,323232,131313,212312,212122112",	// 10
		"211323312,3213212,32323212,131313,2123123,2121223321",
		"13321233,21321211,212121,3232321,1312312121,1313112123",
		"1332123,21321211,21212133,323232131,1312312121,1313112123",
		"32213122,1321313322,1313131121,212121313,3231231313,3232331312",
		"133212313131,21321231332,212121212,3232321211,131231212122,131311212313"
	};

	// 4色
	private static String[] zabuton4 = {
		"123213,123,123,31,33,0",	// 3
		"12323214,1232,1232,41,44,0",
		"1234143214,12341,12341,41,44,0",
		"12342124321,123421,123421,31,33,0",
		"123123213221,123123,143123,43,443,0",
		"121342431221,121342,131342,32,332,2233",	// 8
		"123123213221,123123,143123,414,4414,114414",
		"123214123221,123214,143214,4143,44143,114433414",	// 10
		"121324231221,121324,131324,31423,33142322,1144233413",
		"123413143221,123413,14341343,4142344,4414232,11442233",
		"123423243221,12342343,14342324,41421424,4414212,114422112",	// 13
		"123123213221,12312343,1431234,4142341433,4414231131,1144223314",
		"123423232214,1234234341,1434234,414134243,441413224342,114411334342"
	};
	private static String[] hirazumi4 = {
		"0,11,212,323,32322,0",
		"12,123,121,313,434,434",
		"1221112,312,313,434,242,24244",
		"122321,31233,3131,434,141,141",
		"1223321,312343,31344,1313,212,212",	// 7
		"1223131,4123132,414141,34344,1313,131",
		"12231322,41231311,414141,242141,323424,32322",
		"12231322,31231311,313131,131323,414324,414244224",
		"122343321,3123421,31343421,232323,4243243,4242443342",	// 11
		"12231322,41231311,414141,2424243,3234231313,3232331312",
		"1223132,41231311,41413122,242323424,1213243434,1212443432",	// 13
		"12231322,4123131122,4141414424,343424343,1314234343,1312334342",
		"122313214121,31231321443,313131313,4343431311,242341313133,242411313424",	// 15
	};
	private static String[] kagizumi4 = {
		"0,11,2122,332321,3,0",
		"0,11,21221,3323,4344,4",
		"0,11,2122,3323,4344,1141144",
		"11,2122,3233,4434,2422,1121134",
		"112221112,3133,4344,1141,3133,2232211",	// 7
		"11222121,313311,23223,44244,3433,11311",
		"11222121,31331411,232244,112113,4144,33433",
		"11222121,31331311,43443433,224244,32332,4434422",
		"11222121,31331311,23223323,44242422,141144,2212233",	// 11
		"11222121,31331311,23223323,44242422,1411443,221223343",
		"11222121,31331311,13113323,44142122,343311344,22322334313",
		"112221212,31331141,22324244,44242422,14114434334,221223343434",
		"112212213,313313112,2322332343,4424242243,343344142324,223221142214",	// 15
	};
	private static String[] kaidan4 = {
		"0,0,1112,2223,3332,0",
		"0,1112,22231,33342,4443,0",
		"1,2221,11132,33341,44413,11",
		"0,11123,2224,44431,33312,22211",
		"11122212,22231,3334,4441,1114,444",	// 7
		"11122212,22231,3332,22213,11134,44433",
		"111222124,2223112,33341,44414,11143,33344",
		"1112212212,22231311,333433,444141,111421,22244",
		"1112212212,22231311,33343133,444141,111421,2224422",	// 11
		"1112224212,22234344,33343233,444212,2221323,3331133232",
		"1112212212,22231311,33343133,444141,111421244,22244224213",
		"1112212212,22231131,33323433,222424244,444214242,211123323343",
		"11122322142,222434334,444341442,3331212124,111231212112,33322442441"
	};

	// 5色
	private static String[] zabuton5 = {
		"25152,251,251,325,33,0",
		"54121453,5412,5412,354,33,0",
		"1542324512,15423,15423,215,22,0",	// 5
		"132451542313,132451,132451,313,33,0",
		"412312132114,412312,452312,54,554,4",
		"215241425112,215241,235241,31,331,1133",
		"134534354331,134534,124534,212,2212,112212",
		"323241423223,323241,313241,1513,11513,551133151",	// 10
		"454123214554,454123,414123,14325,11432522,4433255341",
		"423543453224,423543,41354313,1412511,11412525,441122552141",
		"525234325225,52523424,515234112,15354221,115354,553355445351",
		"523423243225,52342313,5134231,1512514133,1151254434,5511225541",
		"142342424413,1423423231,132342341,314253435,331425443534,114422553534"
	};
	private static String[] kaidan5 = {
		"0,0,1112,2223,3332,0,0",
		"0,4442,22214,11132,3331,0",
		"3,4443,33314,11125,55521,22",	// 5
		"0,33324,2225,55541,44412,22211",
		"11155515,55541,4443,3331,1112,222",
		"33322232,22243,4445,55534,33341,11144",
		"111222125,2223112,33351,55535,33354,44455",
		"2223343323,33354544,555155,111242,222432,33344",	// 10
		"3334445434,44415155,11121311,222353,333543,4445544",
		"3331114131,11154344,55513233,111242,2224525,5554455252",
		"1112223212,22243433,44454144,555351,333521355,22255335314",
		"5551151151,11125525,22232122,333431344,444351343,355532232212",
		"2224414424,444313113,333135332,1115452523,555415252552,11144332335"
	};
	private static String[] kagizumi5 = {
		"0,22,3233,113132,1,0",
		"0,33,13113,4414,2422,2",
		"0,33,5355,1151,4144,24222441",	// 5
		"55,4544,3433,2232,1211,4414455",
		"112221112,3133,4344,1141,5155,2252211",
		"55444545,151155,41441,33433,1311,2212233",
		"55111515,45445155,343311,223224,5255,4454422",
		"11333131,41441151,24225255,332322,53553,4454433",	// 10
		"55111515,25225255,42442242,33434344,131133,4414422",
		"11555151,31331311,23223353,44245455,1411443,221223343",
		"33111313,43443433,24224414,55251211,353322455,11311445424",
		"334443432,53553313,22521211,44242122,34331151551,223225515151",
		"334434435,535535332,2522554515,1121414415,414411312521,224223312231"
	};
	private static String[] hirazumi5 = {
		"0,0,33,131,212,2121122",
		"14,143,141,313,232,232",
		"1551115,215,212,323,4344,43433",	// 5
		"455254,14522,1414,313,434,434",
		"1335531,213545,21244,1215,212,212",
		"5114245,3514241,353232,43433,5454,545",
		"51135311,45135355,454545,242545,323424,32322",
		"52215122,45215155,454545,141424,313423,313233223",	// 10
		"322151123,4321523,43454523,141424,5154234,5152334432",
		"35514155,23514133,232424,4242524,1412513431,1415113435",
		"5331513,25315155,25251544,424141242,3431423232,3434223234",
		"21152511,3215252211,3232323313,434313434,5453145454,5451445451",
		"322151254523,13215125441,131535151,4143435155,242345353533,242455353424"
	};

	/**
	 * フィーバーデータ
	 */
	private static String[][][] feverData = {
		// 3色
		{
			zabuton3, kaidan3, kagizumi3, hirazumi3
		},
		// 4色
		{
			zabuton4, kaidan4, kagizumi4, hirazumi4
		},
		// 5色
		{
			zabuton5, kaidan5, kagizumi5, hirazumi5
		}
	};

	/**
	 * ランダム用データ
	 */
	private Random randomData;

	public FeverData(long seed) {
		randomData = new Random(seed);
	}

	/**
	 * ランダムを取得する
	 * @param num
	 * @return
	 */
	public int getRandomInt(int num) {
		return randomData.nextInt(num);
	}

	/**
	 * フィーバーの種を落とす
	 * @param pudt
	 * @param num
	 */
	public void dropFeverData(PuyoData pudt, int num) {
		int clnum = pudt.getColorNum();
		String colstr = "";
		for (int i = 0; i < 5; i++) {
			if (i < clnum) {
				while (true) {
					char ch = (char)('1'+getRandomInt(clnum));
					if (colstr.indexOf(ch) < 0) {
						colstr += ch;
						break;
					}
				}
			}
			else {
				colstr += Integer.toString(i+1);
			}
		}
		num -= 3;
		if (num < 0) {
			num = 0;
		}
		String[] tane = feverData[clnum - 3][getRandomInt(4)];
		if (num >= tane.length) {
			num = tane.length - 1;
		}
		String[] dt = tane[num].split(",");
		for (int x = 0; x < dt.length; x++) {
			for (int y = 0; y < dt[x].length(); y++) {
				int cl = dt[x].charAt(y) - '0';
				if (cl > 0) {
					pudt.addPuyo(BlockPuyo.createPuyo(colstr.charAt(cl-1)-'0', x, -80 - y * 28, 0));
				}
			}
		}
		pudt.makeThinkBlock();
	}
}
